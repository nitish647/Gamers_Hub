Index: app/src/main/java/com/nitish/gamershub/Activities/LoginPage.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.nitish.gamershub.Activities;\n\nimport static com.nitish.gamershub.Utils.ConstantsHelper.UserMail;\n\nimport androidx.activity.result.ActivityResultCallback;\nimport androidx.activity.result.ActivityResultLauncher;\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.view.View;\nimport android.widget.Toast;\n\nimport com.firebase.ui.auth.AuthUI;\nimport com.firebase.ui.auth.FirebaseAuthUIActivityResultContract;\nimport com.firebase.ui.auth.IdpResponse;\nimport com.firebase.ui.auth.data.model.FirebaseAuthUIAuthenticationResult;\nimport com.google.android.gms.common.SignInButton;\nimport com.google.android.gms.tasks.OnCompleteListener;\nimport com.google.android.gms.tasks.OnFailureListener;\nimport com.google.android.gms.tasks.Task;\nimport com.google.firebase.auth.FirebaseAuth;\nimport com.google.firebase.auth.FirebaseUser;\nimport com.google.firebase.firestore.DocumentReference;\nimport com.google.firebase.firestore.DocumentSnapshot;\nimport com.google.firebase.firestore.FirebaseFirestore;\nimport com.google.firebase.firestore.QuerySnapshot;\nimport com.google.firebase.firestore.SetOptions;\nimport com.nitish.gamershub.Pojo.AllGamesItems;\nimport com.nitish.gamershub.Pojo.UserProfile;\nimport com.nitish.gamershub.R;\n\nimport java.text.SimpleDateFormat;\nimport java.util.Arrays;\nimport java.util.Date;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Objects;\n\nimport io.paperdb.Paper;\n\npublic class LoginPage extends AppCompatActivity {\n\n    SignInButton googleSingInButton;\n\n    FirebaseFirestore firestoreDb;\n    public static String GamersHub_ParentCollection =\"Gamers Hub\";\n    public  static String Users_ParentDocument =\"Users\";\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_login_page);\n        googleSingInButton = findViewById(R.id.singInButton);\n        Paper.init(this);\n        firestoreDb = FirebaseFirestore.getInstance();\n        googleSingInButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n\n                List<AuthUI.IdpConfig> providers = Arrays.asList(\n\n\n                        new AuthUI.IdpConfig.GoogleBuilder().build());\n\n// Create and launch sign-in intent\n                Intent signInIntent = AuthUI.getInstance()\n                        .createSignInIntentBuilder()\n                        .setAvailableProviders(providers)\n                        .build();\n                signInLauncher.launch(signInIntent);\n\n            }\n        });\n\n    }\n    private final ActivityResultLauncher<Intent> signInLauncher = registerForActivityResult(\n            new FirebaseAuthUIActivityResultContract(),\n            new ActivityResultCallback<FirebaseAuthUIAuthenticationResult>() {\n                @Override\n                public void onActivityResult(FirebaseAuthUIAuthenticationResult result) {\n                    onSignInResult(result);\n                }\n            }\n    );\n\n    private void onSignInResult(FirebaseAuthUIAuthenticationResult result) {\n        IdpResponse response = result.getIdpResponse();\n        if (result.getResultCode() == RESULT_OK) {\n\n            // Successfully signed in\n            FirebaseUser user = FirebaseAuth.getInstance().getCurrentUser();\n            if(user!=null && user.getEmail()!=null) {\n\n                firestoreDb.collection(GamersHub_ParentCollection).document(user.getEmail()).get().addOnCompleteListener(new OnCompleteListener<DocumentSnapshot>() {\n                    @Override\n                    public void onComplete(@NonNull Task<DocumentSnapshot> task) {\n                        DocumentSnapshot documentSnapshot = task.getResult();\n                        if(task.isSuccessful()) {\n\n                            if (documentSnapshot.exists()) {\n\n                                // for existing users\n                                UserProfile userProfile =  documentSnapshot.toObject(UserProfile.class);\n\n                                UserProfile.ProfileData profileData = userProfile.profileData;\n\n                                SimpleDateFormat dateFormat = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\");\n                                String currentDateTime = dateFormat.format(new Date()); // Find todays date\n                                profileData.setLastLogin(currentDateTime);\n\n                                userProfile.setProfileData(profileData);\n\n                                firestoreDb.collection(GamersHub_ParentCollection).document(user.getEmail()).set(userProfile, SetOptions.merge()).addOnCompleteListener(new OnCompleteListener<Void>() {\n                                    @Override\n                                    public void onComplete(@NonNull Task<Void> task) {\n\n                                        Toast.makeText(LoginPage.this, \"Welcome Back\", Toast.LENGTH_SHORT).show();\n\n\n                                        Paper.book().write(UserMail,user.getEmail());\n                                        Intent intent = new Intent(LoginPage.this, HomeActivity.class);\n                                        startActivity(intent);\n                                        finish();\n                                    }\n                                });\n                            } else {\n\n\n                                // for new users\n\n                                UserProfile userProfile = new UserProfile();\n\n                                UserProfile.ProfileData profileData = new UserProfile.ProfileData();\n\n                                profileData.setEmail(user.getEmail());\n                                profileData.setName(user.getDisplayName());\n\n                                SimpleDateFormat dateFormat = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\");\n                                String currentDateTime = dateFormat.format(new Date()); // Find todays date\n                                profileData.setLastLogin(currentDateTime);\n\n                                userProfile.setProfileData(profileData);\n\n\n                                firestoreDb.collection(GamersHub_ParentCollection).document(user.getEmail()).set(userProfile).addOnCompleteListener(new OnCompleteListener<Void>() {\n                                    @Override\n                                    public void onComplete(@NonNull Task<Void> task) {\n\n                                        Toast.makeText(LoginPage.this, \"Welcome User\", Toast.LENGTH_SHORT).show();\n                                        Paper.book().write(UserMail,user.getEmail());\n                                        Intent intent = new Intent(LoginPage.this, HomeActivity.class);\n                                        startActivity(intent);\n                                        finish();\n                                    }\n                                });\n\n                            }\n\n                        }\n\n                    }\n                }).addOnFailureListener(new OnFailureListener() {\n                    @Override\n                    public void onFailure(@NonNull Exception e) {\n                        Toast.makeText(LoginPage.this, \"failed \"+e, Toast.LENGTH_SHORT).show();\n\n                    }\n                });\n            }\n            else {\n                Toast.makeText(this, \"user is null\", Toast.LENGTH_SHORT).show();\n            }\n\n            // ...\n        } else {\n\n\n            Toast.makeText(this, \"Login Failed \"+ result.getIdpResponse()+\" \"+result.getResultCode(), Toast.LENGTH_SHORT).show();\n\n            // Sign in failed. If response is null the user canceled the\n            // sign-in flow using the back button. Otherwise check\n            // response.getError().getErrorCode() and handle the error.\n            // ...\n        }\n\n    }\n\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/nitish/gamershub/Activities/LoginPage.java b/app/src/main/java/com/nitish/gamershub/Activities/LoginPage.java
--- a/app/src/main/java/com/nitish/gamershub/Activities/LoginPage.java	(revision efffb965d58fb1414c01081f76eb3e30ded274ff)
+++ b/app/src/main/java/com/nitish/gamershub/Activities/LoginPage.java	(date 1661629984182)
@@ -92,6 +92,7 @@
 
             // Successfully signed in
             FirebaseUser user = FirebaseAuth.getInstance().getCurrentUser();
+
             if(user!=null && user.getEmail()!=null) {
 
                 firestoreDb.collection(GamersHub_ParentCollection).document(user.getEmail()).get().addOnCompleteListener(new OnCompleteListener<DocumentSnapshot>() {
@@ -166,7 +167,7 @@
                     @Override
                     public void onFailure(@NonNull Exception e) {
                         Toast.makeText(LoginPage.this, "failed "+e, Toast.LENGTH_SHORT).show();
-
+                        Log.d("gError111","login failed :"+e);
                     }
                 });
             }
@@ -176,9 +177,10 @@
 
             // ...
         } else {
+            Log.d("gError112","login failed : "+ result.getIdpResponse()+" getResultCode "+result.getResultCode());
 
 
-            Toast.makeText(this, "Login Failed "+ result.getIdpResponse()+" "+result.getResultCode(), Toast.LENGTH_SHORT).show();
+            Toast.makeText(this, "Login Failed "+ result.getIdpResponse()+"  getResultCode "+result.getResultCode(), Toast.LENGTH_SHORT).show();
 
             // Sign in failed. If response is null the user canceled the
             // sign-in flow using the back button. Otherwise check
